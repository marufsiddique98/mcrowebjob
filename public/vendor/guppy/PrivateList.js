const __vite__fileDeps=["app.js","app.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{u as H,a as V,j as N,s as d,r as O,H as P,k as D,o as e,c as s,f as o,w as L,F as g,l as F,p as C,i,d as n,t as l,I as j,_ as z,n as u,G,e as p}from"./app.js";const U="/vendor/guppy/empty-chat.svg",Z={id:"messages",class:"at-userlist_tab active"},q=["onClick"],J={key:0,class:"laraguppy-block"},K=["onLoad","src","alt"],Q={key:0,class:"at-userbar_title"},W={key:0},X={key:0},Y=n("i",{class:"laraguppy-block"},null,-1),x={key:1},f={key:2},tt=n("i",{class:"laraguppy-file-01"},null,-1),et={key:3},st=n("i",{class:"laraguppy-location"},null,-1),at={key:4},ot=n("i",{class:"laraguppy-mic"},null,-1),nt={key:5},ct=["innerHTML"],lt={class:"at-userbar_right"},it={key:0,class:"at-notify"},rt={key:1,class:"at-emptyconver"},ut=["src"],gt={__name:"PrivateList",setup(pt){const y=j(()=>z(()=>import("./app.js").then(a=>a.bZ),__vite__mapDeps([0,1]))),m=H(),v=V(),k=N(),{getTabRecord:_,loadingStatus:b,activeTab:_t,search:h}=d(m),{updateTabList:M}=m,{settings:S}=d(k),{chatInfo:$}=d(v),{getMessageTime:A}=k,{updateChatInfo:E}=v,r=O([]),T=async(a,c=!1)=>{let t={tab:"private_chat",url:"threads",loadingType:a,search:h.value,isSearching:c};await M(t)},R=P.debounce(({target:{clientHeight:a,scrollTop:c,scrollHeight:t}})=>{c+a+5>=t&&T("isScrolling")},250),w=a=>{E(a)},B=()=>"";return D(()=>{var c;(!_.value("private_chat").length||h.value)&&T("isLoading",((c=h.value)==null?void 0:c.length)>0)}),(a,c)=>(e(),s("div",Z,[o(_)("private_chat").length?(e(),s("ul",{key:0,class:"conversation-list",id:"private_thread_list",onScroll:c[0]||(c[0]=L(t=>o(R)(t),["prevent"]))},[(e(!0),s(g,null,F(o(_)("private_chat"),t=>{var I;return e(),s("li",{onClick:L(ht=>w(t),["prevent"]),key:t.threadId,class:u([{active:o($).threadId===t.threadId},"at-userbar"])},[n("figure",{class:u(["at-userbar_profile",{"at-blockuser":t.friendStatus=="blocked","at-shimmer":!r.value.includes(t.threadId)}])},[t.friendStatus=="blocked"?(e(),s("i",J)):(e(),s("span",{key:1,class:u(["at-userstatus",{online:t.isOnline,offline:!t.isOnline,"at-none":!r.value.includes(t.threadId)}])},null,2)),n("img",{onLoad:()=>r.value.push(t.threadId),class:u({"at-none":!r.value.includes(t.threadId)}),src:t.photo?t.photo:o(S).defaultAvatar?o(S).defaultAvatar:o(G),alt:t.name},null,42,K)],2),t.name?(e(),s("div",Q,[t.name?(e(),s("h3",W,l(t.name),1)):i("",!0),t.clearChat?i("",!0):(e(),s(g,{key:1},[t.deletedAt?(e(),s("span",X,[Y,p(l(a.$t("chatapp.deleted_message")),1)])):t.messageType==="text"?(e(),s("span",x,l(t.body),1)):["document","audio","video","image"].includes(t.messageType)?(e(),s("span",f,[tt,p(l(t.isSender?a.$t("chatapp.you_sent_attachment"):a.$t("chatapp.sent_you_attachment")),1)])):t.messageType==="location"?(e(),s("span",et,[st,p(l(t.isSender?a.$t("chatapp.you_sent_location"):a.$t("chatapp.sent_you_location")),1)])):t.messageType==="voice"?(e(),s("span",at,[ot,p(l(t.isSender?a.$t("chatapp.you_sent_voice_note"):a.$t("chatapp.sent_you_voice_note")),1)])):i("",!0),t.messageType==="notify"?(e(),s("span",nt,[n("span",{innerHTML:B()},null,8,ct)])):i("",!0)],64))])):i("",!0),n("div",lt,[((I=t.unSeenMessages)==null?void 0:I.length)>0?(e(),s("em",it,l(t.unSeenMessages.length>99?"99+":t.unSeenMessages.length),1)):i("",!0),n("span",null,l(o(A)(t.createdAt)),1)])],10,q)}),128)),o(b)({tab:"private_chat",loadingType:"isScrolling"})?(e(),C(o(y),{key:0,type:"innerLoading"})):i("",!0)],32)):(e(),s(g,{key:1},[o(b)({tab:"private_chat",loadingType:"isLoading"})?(e(),C(o(y),{key:0,showText:"true"})):(e(),s("div",rt,[n("img",{src:o(U)},null,8,ut),n("span",null,l(a.$t("chatapp.no_result_found")),1)]))],64))]))}};export{gt as default};
